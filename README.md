# jstring<br>

## Features:<br>
- works with any string type: functions will take a pointer to string, size,<br>
and capacity.<br>
- in-place literal string and regex replacement: supports backreferences and<br>
searching from a specified index.<br>
- reverse standard string functions: memrchr\(\), strrstr\(\), strrspn\(\), strrcspn\(\),<br>
etc.<br>
- standard string functions for non-nul terminated strings: memspn\(\), memcspn\(\),<br>
mempbrk\(\), etc.<br>
- extensions to standard string functions: strnstr\(\), strnchr\(\), strcasestr\_len\(\).<br>
- string formatting: asprintf\(\) and vsprintfstrlen\(\) which returns the number<br>
of characters vsprintf will write excluding the nul.<br>

## Installation:<br>

```
./build && sudo ./install
#include <jstr/jstr.h>
```<br>

or<br>

```
./build && ./install-to /path/to/some/dir
#include "/path/to/some/dir/jstr.h"
```<br>

Some headers may need to be explicitly included since they rely on POSIX.<br>

## Disclaimer:<br>
Some of the code are licensed under LGPL. You can define JSTR\_USE\_LGPL as 0 or<br>
use ./remove-lgpl to exclude the LGPL code. jstr\_ty, jstrl\_ty must be initialized<br>
with zeros.<br>

```
jstr_ty j = JSTR_INIT;
```<br>

## Error handling:<br>
JSTR\_ERR is returned as error. The programmer is expected to check the return value<br>
and handle the error. When a memory error is encountered, all related resources will<br>
be freed by the function in which the error occured. Use jstr\_err\(\) to print the<br>
error message or jstr\_errdie\(\) to also exit. When debugging, you may want to define<br>
JSTR\_PANIC as 1 to automatically call jstr\_errdie\(\) on errors.<br>

## Naming conventions<br>
### Functions:<br>
- \*\_mem\*\(\): the string need not be nul-terminated.<br>
- \*\_len\(\): take the length of the string.<br>
- \*str\*\_len\(\): the string must be nul-termimated. The size is only used to save<br>
a strlen\(\).<br>
- \*stp\*\(\), \*\_p\(\), \*P\(\): return a pointer to the end of the string.<br>
- \*\_unsafe\(\): assume that there be enough space in the string: the string will not<br>
be grown.<br>
- \*\_from\(\): operate starting from a specified index.<br>
The index passed by the user is assumed to be not out of bounds.<br>
- \*\_bref\(\): enable backreferences for the replacement string. \0 is interpreted as<br>
referring to the whole matched string.<br>
- [Pp]namespace\_\*\(\): private functions or macros used internally. These are supposed<br>
to be invisible to the user.<br>

## Scripts:<br>
- build: generate functions.<br>
- install: build and copy headers to /usr/local/include/jstr \(requires sudo\).<br>
- install-to: install to a specified directory.<br>
- uninstall: remove /usr/local/include/jstr \(requires sudo\).<br>
- clean: remove files generated by build.<br>
- fmt: format files.<br>
- remove-lgpl: remove LGPL code from ./jstr. Use this before ./install and<br>
after ./build.<br>
For example:<br>

```
./build && ./remove-lgpl && sudo ./install
```<br>
